
if(typeof(RGraph)=='undefined')RGraph={isRGraph:true,type:'common'};RGraph.Highlight={};RGraph.tooltips={};RGraph.tooltips.padding='3px';RGraph.tooltips.font_face='Tahoma';RGraph.tooltips.font_size='10pt';RGraph.Tooltip=function(obj,text,x,y,idx,e)
{if(typeof(obj.Get('chart.tooltips.override'))=='function'){return obj.Get('chart.tooltips.override')(obj,text,x,y,idx);}
var originalX=x;var originalY=y;text=RGraph.getTooltipTextFromDIV(text);var timers=RGraph.Registry.Get('chart.tooltip.timers');if(timers&&timers.length){for(i=0;i<timers.length;++i){clearTimeout(timers[i]);}}
RGraph.Registry.Set('chart.tooltip.timers',[]);if(obj.Get('chart.contextmenu')){RGraph.HideContext();}
var effect=obj.Get('chart.tooltips.effect').toLowerCase();var tooltipObj=document.createElement('DIV');tooltipObj.className=obj.Get('chart.tooltips.css.class');tooltipObj.style.display='none';tooltipObj.style.position='absolute';tooltipObj.style.left=0;tooltipObj.style.top=0;tooltipObj.style.backgroundColor='rgb(255,255,239)';tooltipObj.style.color='black';if(!document.all)tooltipObj.style.border='';tooltipObj.style.visibility='visible';tooltipObj.style.paddingLeft=RGraph.tooltips.padding;tooltipObj.style.paddingRight=RGraph.tooltips.padding;tooltipObj.style.fontFamily=RGraph.tooltips.font_face;tooltipObj.style.fontSize=RGraph.tooltips.font_size;tooltipObj.style.zIndex=3;if(RGraph.trim(text).length>0){tooltipObj.style.border='1px #bbb solid';}
tooltipObj.style.borderRadius='5px';tooltipObj.style.MozBorderRadius='5px';tooltipObj.style.WebkitBorderRadius='5px';tooltipObj.style.WebkitBoxShadow='rgba(96,96,96,0.5) 0 0 15px';tooltipObj.style.MozBoxShadow='rgba(96,96,96,0.5) 0 0 15px';tooltipObj.style.boxShadow='rgba(96,96,96,0.5) 0 0 15px';tooltipObj.style.filter='progid:DXImageTransform.Microsoft.Shadow(color=#666666,direction=135)';tooltipObj.style.opacity=0;tooltipObj.innerHTML=text;tooltipObj.__text__=text;tooltipObj.__canvas__=obj.canvas;tooltipObj.style.display='inline';tooltipObj.id='__rgraph_tooltip_'+obj.canvas.id+'_'+obj.uid+'_'+idx;tooltipObj.__event__=obj.Get('chart.tooltips.event')||'click';tooltipObj.__object__=obj;if(typeof(idx)=='number'){tooltipObj.__index__=idx;origIdx=idx;}
if(obj.type=='line'||obj.type=='radar'){for(var ds=0;ds<obj.data.length;++ds){if(idx>=obj.data[ds].length){idx-=obj.data[ds].length;}else{break;}}
tooltipObj.__dataset__=ds;tooltipObj.__index2__=idx;}
document.body.appendChild(tooltipObj);var width=tooltipObj.offsetWidth;var height=tooltipObj.offsetHeight;tooltipObj.style.width=width+'px';tooltipObj.style.top=(y-height-2)+'px';if(typeof(obj.positionTooltip)=='function'){if(tooltipObj.innerHTML.length>0){obj.positionTooltip(obj,x,y,tooltipObj,origIdx?origIdx:idx);if(obj.Get('chart.tooltips.coords.page')){tooltipObj.style.left=e.pageX-(width/2)-4.25+'px';tooltipObj.style.top=e.pageY-height-7+'px';document.getElementById('__rgraph_tooltip_pointer__').style.left=(parseInt(tooltipObj.offsetWidth)/2)-8.5+'px';}}}
if(effect=='fade'||effect=='expand'||effect=='contract'||effect=='snap'){setTimeout(function(){tooltipObj.style.opacity=0.1;},25);setTimeout(function(){tooltipObj.style.opacity=0.2;},50);setTimeout(function(){tooltipObj.style.opacity=0.3;},75);setTimeout(function(){tooltipObj.style.opacity=0.4;},100);setTimeout(function(){tooltipObj.style.opacity=0.5;},125);setTimeout(function(){tooltipObj.style.opacity=0.6;},150);setTimeout(function(){tooltipObj.style.opacity=0.7;},175);setTimeout(function(){tooltipObj.style.opacity=0.8;},200);setTimeout(function(){tooltipObj.style.opacity=0.9;},225);if(effect=='expand'||effect=='contract'||effect=='snap'){console.log('[RGRAPH] The snap, expand and contract tooltip effects are deprecated. Available effects now are fade and none');}}
setTimeout("if (RGraph.Registry.Get('chart.tooltip')) { RGraph.Registry.Get('chart.tooltip').style.opacity = 1;}",effect=='none'?50:250);tooltipObj.onmousedown=function(e){e.stopPropagation();}
tooltipObj.onmouseup=function(e){e.stopPropagation();}
tooltipObj.onclick=function(e){if(e.button==0){e.stopPropagation();}}
RGraph.Registry.Set('chart.tooltip',tooltipObj);RGraph.FireCustomEvent(obj,'ontooltip');}
RGraph.getTooltipTextFromDIV=function(text)
{var result=/^id:(.*)/.exec(text);if(result&&result[1]&&document.getElementById(result[1])){text=document.getElementById(result[1]).innerHTML;}else if(result&&result[1]){text='';}
return text;}
RGraph.getTooltipWidth=function(text,obj)
{var div=document.createElement('DIV');div.className=obj.Get('chart.tooltips.css.class');div.style.paddingLeft=RGraph.tooltips.padding;div.style.paddingRight=RGraph.tooltips.padding;div.style.fontFamily=RGraph.tooltips.font_face;div.style.fontSize=RGraph.tooltips.font_size;div.style.visibility='hidden';div.style.position='absolute';div.style.top='300px';div.style.left=0;div.style.display='inline';div.innerHTML=RGraph.getTooltipTextFromDIV(text);document.body.appendChild(div);return div.offsetWidth;}
RGraph.HideTooltip=function()
{var tooltip=RGraph.Registry.Get('chart.tooltip');if(tooltip){tooltip.parentNode.removeChild(tooltip);tooltip.style.display='none';tooltip.style.visibility='hidden';RGraph.Registry.Set('chart.tooltip',null);}}
RGraph.Highlight.Rect=function(obj,shape)
{if(obj.Get('chart.tooltips.highlight')){var canvas=obj.canvas;var context=obj.context;context.beginPath();context.strokeStyle=obj.Get('chart.highlight.stroke');context.fillStyle=obj.Get('chart.highlight.fill');context.strokeRect(shape['x'],shape['y'],shape['width'],shape['height']);context.fillRect(shape['x'],shape['y'],shape['width'],shape['height']);context.stroke;context.fill();}}
RGraph.Highlight.Point=function(obj,shape)
{if(obj.Get('chart.tooltips.highlight')){var canvas=obj.canvas;var context=obj.context;context.beginPath();context.strokeStyle=obj.Get('chart.highlight.stroke');context.fillStyle=obj.Get('chart.highlight.fill');var radius=obj.Get('chart.highlight.point.radius')||2;context.arc(shape['x'],shape['y'],radius,0,TWOPI,0);context.stroke();context.fill();}}
RGraph.PreLoadTooltipImages=function(obj)
{var tooltips=obj.Get('chart.tooltips');if(RGraph.hasTooltips(obj)){if(obj.type=='rscatter'){tooltips=[];for(var i=0;i<obj.data.length;++i){tooltips.push(obj.data[3]);}}
for(var i=0;i<tooltips.length;++i){var div=document.createElement('DIV');div.style.position='absolute';div.style.opacity=0;div.style.top='-100px';div.style.left='-100px';div.innerHTML=tooltips[i];document.body.appendChild(div);var img_tags=div.getElementsByTagName('IMG');for(var j=0;j<img_tags.length;++j){if(img_tags&&img_tags[i]){var img=document.createElement('IMG');img.style.position='absolute';img.style.opacity=0;img.style.top='-100px';img.style.left='-100px';img.src=img_tags[i].src
document.body.appendChild(img);setTimeout(function(){document.body.removeChild(img);},250);}}
document.body.removeChild(div);}}}
RGraph.Tooltips_mousemove=function(obj,e)
{var shape=obj.getShape(e);var changeCursor_tooltips=false
if(shape&&typeof(shape['index'])=='number'&&obj.Get('chart.tooltips')[shape['index']]){var text=RGraph.parseTooltipText(obj.Get('chart.tooltips'),shape['index']);if(text){changeCursor_tooltips=true;if(obj.Get('chart.tooltips.event')=='onmousemove'){if(!RGraph.Registry.Get('chart.tooltip')||RGraph.Registry.Get('chart.tooltip').__object__.uid!=obj.uid||RGraph.Registry.Get('chart.tooltip').__index__!=shape['index']){RGraph.HideTooltip();RGraph.Clear(obj.canvas);RGraph.Redraw();RGraph.Tooltip(obj,text,e.pageX,e.pageY,shape['index']);obj.Highlight(shape);}}}}else if(shape&&typeof(shape['index'])=='number'){var text=RGraph.parseTooltipText(obj.Get('chart.tooltips'),shape['index']);if(text){changeCursor_tooltips=true}}
return changeCursor_tooltips;}